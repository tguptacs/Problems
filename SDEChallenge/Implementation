#include <structure.h>

class StructureImpl : public Structure<>
{
	int capacity;
	double sum;
	list<T> elements;

public:
	StructureImpl(int n)
	: capacity(n), sum(0)
	{}
	
	void addElement(T ele)
	{
	    elements.push_back(ele);
	    double val = ele.getValue();
		sum += val;
		
		if(elements.size() > capacity)
		{
			T temp = elements.front();
			sum -= temp.getValue();
			elements.pop_front();
		}
	}
	
	int size()
	{
	    return elements.size();    
	}
	
    Iterator begin()
	{
		return elements.begin();
	}

	Iterator end()
	{
		return elements.end();
	}

	double averageLastMoving()
	{
		return sum/capacity;	
	}
};
